<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>promise封装ajax</title>
</head>
<body>
<h1>Ajax 发送 get 请求</h1>
<input type="button" value="发送get_ajax请求" id='btnAjax'>
<script>
	function ajax(type, file){
		return new Promise((resolve,reject)=>{
			let xhr = new XMLHttpRequest()
			xhr.open(type, file);
			xhr.send();
			xhr.onreadystatechange = function(){
//				console.log(xhr.readyState);
//				console.log(xhr.status);
				if (xhr.readyState == 4 && xhr.status == 200) {
					let data = xhr.responseText
					resolve(data)
                }
			}
			console.log('may reject')
//			reject('file not found')
		})
	}
	document.querySelector('#btnAjax').onclick = function(){
		ajax('get','test.php').then(data=>{
			console.log(data,1)
			console.log('success')
		},(reason)=>{
			console.log('error '+reason)
		})
	}

</script>
</body>
</html>